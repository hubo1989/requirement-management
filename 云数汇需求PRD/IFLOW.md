# iFlow CLI 项目上下文文档

## 项目概述

这是一个**联合营销平台三方营销管理-云数汇接入项目**，旨在构建一个完整的多渠道优惠券营销管理平台。项目通过接入云数汇第三方优惠券服务商，为合作银行提供统一的优惠券发放服务。

### 核心价值
- **降低接入成本**：银行无需直接对接云数汇，通过标准化接口快速接入
- **统一管理平台**：提供完整的活动管理和数据分析能力
- **扩展性保障**：中间层设计支持后续接入多个上游发券通道
- **数据安全可控**：完整的权限控制和数据隔离机制

## 项目结构

```
thirdparty_promotion_story/
├── 📄 需求文档
│   ├── index.html                    # 联合营销平台三方营销管理-云数汇接入需求文档（主文档）
│   ├── activity_story.html           # 主题活动管理系统需求文档
│   ├── promotion_story.html          # 活动优惠券管理系统需求文档
│   ├── activity_prototype.html       # 主题活动管理功能原型
│   └── promotion_prototype.html      # 活动优惠券管理功能原型
├── 📖 技术文档
│   └── api/接口文档.md               # 云数汇API接口技术规范
├── 🖼️ 预览图片
│   ├── image/activity_preview.png    # 主题活动管理系统预览图
│   └── image/promotion_preview.png   # 活动优惠券管理系统预览图
├── 📁 项目配置
│   ├── .trae/TODO.md                 # 项目任务清单
│   ├── .trae/documents/              # 项目文档
│   ├── .vercel/project.json          # Vercel部署配置
│   └── .vscode/settings.json         # VSCode编辑器配置
└── 🌐 部署文件
    ├── CNAME                         # 域名配置
    └── README.md                     # 项目说明文档
```

## 系统架构

### 整体架构概览

```
┌─────────────────────────────────────────────────────────────┐
│                    联合营销平台                              │
├─────────────────────┬───────────────────────────────────────┤
│   主题活动管理系统    │        活动优惠券管理系统              │
│                    │                                      │
│ • 活动策划配置       │ • 多渠道优惠券活动管理                 │
│ • 转盘抽奖设计       │ • 微信/支付宝/银联                    │
│ • 奖品池管理         │ • 发放监控与核销管理                   │
│ • 数据统计分析       │ • 数据分析与ROI统计                   │
└─────────────────────┴───────────────────────────────────────┘
                              │
                    ┌─────────────────┐
                    │  云数汇接入层    │
                    │                │
                    │ • API封装      │
                    │ • 回调处理      │
                    │ • 数据同步      │
                    └─────────────────┘
                              │
                    ┌─────────────────┐
                    │   云数汇平台     │
                    │                │
                    │ • 优惠券发放    │
                    │ • 核销通知      │
                    │ • 数据查询      │
                    └─────────────────┘
```

### 核心系统组成

1. **主题活动管理系统**：负责营销活动的策划、配置和管理，包含转盘抽奖等互动功能
2. **活动优惠券管理系统**：专门管理多渠道优惠券活动（微信、支付宝、银联），与主题活动关联
3. **云数汇接入层**：封装云数汇API，提供统一的优惠券发放服务接口
4. **联合营销平台**：为运营人员提供统一的管理界面和数据查询功能

## 云数汇API接口规范

### 核心接口列表

| 接口名称 | 功能描述 | 使用场景 |
|---------|----------|----------|
| 获取OpenID | 获取用户微信OpenID | H5页面用户授权 |
| 发放优惠券 | 调用云数汇API发放优惠券 | 营销活动发券 |
| 核销回调 | 处理优惠券核销通知 | 用户消费核销 |
| 数据查询 | 查询发放结果和核销状态 | 数据统计分析 |

### 技术规范

- **认证方式**：LKLAPI-SHA256withRSA签名认证
- **数据格式**：JSON格式数据交换
- **回调机制**：延时队列散列通知，最长4小时重试
- **加密标准**：RSA2签名验证

## 开发环境配置

### 技术栈
- **前端**：HTML5、CSS3、JavaScript（ES6+）
- **后端**：Node.js、Express.js
- **数据库**：PostgreSQL
- **部署**：Vercel静态部署
- **版本控制**：Git

### 浏览器支持
- Chrome 70+
- Firefox 65+
- Safari 12+
- Edge 79+

### 网络要求
- 可访问云数汇API服务
- 支持HTTPS协议

## 项目使用指南

### 快速开始

1. **查看需求文档**
   ```bash
   # 打开主需求文档
   open index.html
   
   # 查看主题活动管理需求
   open activity_story.html
   
   # 查看活动优惠券管理需求
   open promotion_story.html
   ```

2. **查看功能原型**
   ```bash
   # 查看主题活动管理原型
   open activity_prototype.html
   
   # 查看活动优惠券管理原型
   open promotion_prototype.html
   ```

3. **查看技术文档**
   ```bash
   # 查看API接口文档
   open api/接口文档.md
   ```

### 部署说明

项目使用Vercel进行静态部署，已配置自动部署：
- 主分支推送自动触发部署
- 支持自定义域名配置（CNAME文件）

### 开发规范

#### 文档规范
- 使用标准HTML5文档结构
- 响应式设计，支持移动端查看
- 中文内容使用宋体，英文使用系统默认字体

#### 版本管理
- 使用Git进行版本控制
- 主分支为main
- 使用语义化版本号（v2.0.0）

#### 文件命名
- 使用英文小写+下划线命名
- HTML文件使用.html扩展名
- 图片文件使用.png格式

## 项目状态

### 当前版本：v2.0.0
- ✅ 需求文档已完成
- ✅ 功能原型已设计
- ✅ API接口文档已完善
- ✅ 项目结构已优化

### 最近更新（2025-08-07）
- 🎯 重新组织项目架构和文档结构
- 📝 优化文档内容，精简冗余信息
- 🔧 更新数据字典，新增关键字段
- 📋 完善技术规范和接口说明

## 相关资源

### 在线访问
- 项目主页：通过index.html访问
- 功能原型：通过prototype文件查看
- API文档：通过api目录访问

### 联系方式
- 项目维护：云数汇技术团队
- 技术支持：通过README.md中的联系方式获取

## 注意事项

1. **安全要求**：所有API调用必须使用HTTPS协议
2. **数据保护**：敏感数据需要加密传输和存储
3. **权限控制**：基于银行机构的数据权限隔离
4. **审计日志**：完整的操作审计和安全日志记录

---

*本文档由iFlow CLI自动生成，用于提供项目上下文信息*