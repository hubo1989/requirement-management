<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商户维度统计分析 - 银行数据看板</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 222.2 84% 4.9%;
            --primary: 222.2 47.4% 11.2%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96%;
            --secondary-foreground: 222.2 47.4% 11.2%;
            --muted: 210 40% 96%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --accent: 210 40% 96%;
            --accent-foreground: 222.2 47.4% 11.2%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 210 40% 98%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --ring: 222.2 84% 4.9%;
            --radius: 0.5rem;
        }

        body {
            background: hsl(var(--background));
            color: hsl(var(--foreground));
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid hsl(var(--border));
        }

        .subtitle {
            color: hsl(var(--muted-foreground));
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .control-group label {
            font-size: 0.8rem;
            color: hsl(var(--muted-foreground));
        }

        .control-group select {
            padding: 8px 12px;
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius);
            background: hsl(var(--background));
        }

        button {
            padding: 8px 16px;
            background: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 500;
        }

        button:hover {
            opacity: 0.9;
        }

        .overview-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: 0 1px 3px 0 hsl(var(--border) / 0.1);
        }

        .card-title {
            font-size: 0.9rem;
            color: hsl(var(--muted-foreground));
            margin-bottom: 10px;
        }

        .card-value {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .card-change {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
        }

        .card-change.positive {
            color: #16a34a;
        }

        .card-change.negative {
            color: #dc2626;
        }

        .chart-container {
            background: hsl(var(--card));
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: 0 1px 3px 0 hsl(var(--border) / 0.1);
            margin-bottom: 30px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .chart-options {
            display: flex;
            gap: 10px;
        }

        .chart-option {
            padding: 6px 12px;
            border-radius: var(--radius);
            font-size: 0.85rem;
            cursor: pointer;
            background: hsl(var(--muted));
            color: hsl(var(--muted-foreground));
        }

        .chart-option.active {
            background: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
        }

        .chart-wrapper {
            height: 400px;
            position: relative;
        }

        .data-table-container {
            background: hsl(var(--card));
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: 0 4px 6px -1px hsl(var(--border) / 0.1);
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th, .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid hsl(var(--border));
        }

        .data-table th {
            background: hsl(var(--muted));
            color: hsl(var(--muted-foreground));
            font-weight: 600;
            font-size: 0.9rem;
        }

        .data-table tr:hover {
            background: hsl(var(--muted));
        }

        .percentage-bar {
            height: 8px;
            background: hsl(var(--muted));
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .percentage-fill {
            height: 100%;
            background: hsl(var(--primary));
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: hsl(var(--muted-foreground));
            font-size: 0.9rem;
        }

        .tab-container {
            margin-bottom: 30px;
        }

        .tab-header {
            display: flex;
            gap: 10px;
            border-bottom: 1px solid hsl(var(--border));
            margin-bottom: 20px;
        }

        .tab-button {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            font-weight: 500;
            color: hsl(var(--muted-foreground));
        }

        .tab-button.active {
            color: hsl(var(--primary));
            border-bottom-color: hsl(var(--primary));
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .controls {
                width: 100%;
                margin-top: 15px;
            }
            
            .chart-wrapper {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>商户维度统计分析系统</h1>
                <div class="subtitle">联合营销平台 - 商户行业、地区、分公司及代理商数据分析</div>
            </div>
            <div class="controls">
                <div class="control-group">
                    <label>时间范围</label>
                    <select id="timeRange">
                        <option value="7">最近7天</option>
                        <option value="30" selected>最近30天</option>
                        <option value="90">最近90天</option>
                        <option value="365">最近一年</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>银行</label>
                    <select id="bankSelect">
                        <option value="all" selected>全部银行</option>
                        <option value="icbc">工商银行</option>
                        <option value="ccb">建设银行</option>
                        <option value="abc">农业银行</option>
                        <option value="boc">中国银行</option>
                        <option value="bocom">交通银行</option>
                    </select>
                </div>
                <button id="exportBtn">导出数据</button>
                <button id="backBtn">返回总览</button>
            </div>
        </div>

        <div class="overview-cards">
            <div class="card">
                <div class="card-title">总商户数量</div>
                <div class="card-value">15,432</div>
                <div class="card-change positive">
                    <span>↑</span>
                    <span>5.3% 较上期</span>
                </div>
            </div>
            <div class="card">
                <div class="card-title">达标商户数量</div>
                <div class="card-value">8,765</div>
                <div class="card-change positive">
                    <span>↑</span>
                    <span>9.2% 较上期</span>
                </div>
            </div>
            <div class="card">
                <div class="card-title">活跃商户数量</div>
                <div class="card-value">12,345</div>
                <div class="card-change positive">
                    <span>↑</span>
                    <span>7.8% 较上期</span>
                </div>
            </div>
            <div class="card">
                <div class="card-title">商户达标率</div>
                <div class="card-value">56.8%</div>
                <div class="card-change positive">
                    <span>↑</span>
                    <span>2.1% 较上期</span>
                </div>
            </div>
        </div>

        <div class="tab-container">
            <div class="tab-header">
                <div class="tab-button active" data-tab="industry">行业分析</div>
                <div class="tab-button" data-tab="region">地区分析</div>
                <div class="tab-button" data-tab="branch">分公司分析</div>
                <div class="tab-button" data-tab="agent">代理商分析</div>
            </div>

            <div class="tab-content active" id="industry">
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="chart-title">商户行业交易分布</div>
                        <div class="chart-options">
                            <div class="chart-option active" data-chart="pie">饼图</div>
                            <div class="chart-option" data-chart="bar">柱状图</div>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="industryChart"></canvas>
                    </div>
                </div>

                <div class="data-table-container">
                    <div class="chart-header">
                        <div class="chart-title">商户行业详细数据</div>
                        <button id="refreshIndustryTable">刷新数据</button>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>行业类型(MCC)</th>
                                <th>行业名称</th>
                                <th>商户数量</th>
                                <th>交易笔数</th>
                                <th>交易金额(万元)</th>
                                <th>达标商户数</th>
                                <th>达标率</th>
                                <th>占比</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>5411</td>
                                <td>超市</td>
                                <td>2,345</td>
                                <td>345,678</td>
                                <td>1,234.5</td>
                                <td>1,234</td>
                                <td>52.6%</td>
                                <td>
                                    22.3%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 22.3%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>5812</td>
                                <td>餐饮</td>
                                <td>3,456</td>
                                <td>456,789</td>
                                <td>987.6</td>
                                <td>2,345</td>
                                <td>67.9%</td>
                                <td>
                                    18.7%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 18.7%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>5541</td>
                                <td>加油站</td>
                                <td>1,234</td>
                                <td>234,567</td>
                                <td>2,345.6</td>
                                <td>876</td>
                                <td>71.0%</td>
                                <td>
                                    15.2%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 15.2%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>7011</td>
                                <td>酒店</td>
                                <td>987</td>
                                <td>123,456</td>
                                <td>1,567.8</td>
                                <td>654</td>
                                <td>66.3%</td>
                                <td>
                                    12.1%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 12.1%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>4121</td>
                                <td>出租车</td>
                                <td>2,109</td>
                                <td>87,654</td>
                                <td>432.1</td>
                                <td>1,098</td>
                                <td>52.1%</td>
                                <td>
                                    8.9%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 8.9%"></div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="tab-content" id="region">
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="chart-title">商户地区分布</div>
                        <div class="chart-options">
                            <div class="chart-option active" data-chart="map">地图</div>
                            <div class="chart-option" data-chart="bar">柱状图</div>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="regionChart"></canvas>
                    </div>
                </div>

                <div class="data-table-container">
                    <div class="chart-header">
                        <div class="chart-title">商户地区详细数据</div>
                        <button id="refreshRegionTable">刷新数据</button>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>省份</th>
                                <th>商户数量</th>
                                <th>交易笔数</th>
                                <th>交易金额(万元)</th>
                                <th>达标商户数</th>
                                <th>达标率</th>
                                <th>占比</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>广东省</td>
                                <td>3,456</td>
                                <td>456,789</td>
                                <td>2,345.6</td>
                                <td>2,109</td>
                                <td>61.0%</td>
                                <td>
                                    22.4%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 22.4%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>江苏省</td>
                                <td>2,876</td>
                                <td>345,678</td>
                                <td>1,987.6</td>
                                <td>1,765</td>
                                <td>61.4%</td>
                                <td>
                                    18.6%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 18.6%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>浙江省</td>
                                <td>2,345</td>
                                <td>298,765</td>
                                <td>1,654.3</td>
                                <td>1,432</td>
                                <td>61.1%</td>
                                <td>
                                    15.2%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 15.2%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>山东省</td>
                                <td>1,987</td>
                                <td>234,567</td>
                                <td>1,234.5</td>
                                <td>1,198</td>
                                <td>60.3%</td>
                                <td>
                                    12.9%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 12.9%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>北京市</td>
                                <td>1,654</td>
                                <td>198,765</td>
                                <td>987.6</td>
                                <td>987</td>
                                <td>59.7%</td>
                                <td>
                                    10.7%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 10.7%"></div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="tab-content" id="branch">
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="chart-title">分公司业绩对比</div>
                        <div class="chart-options">
                            <div class="chart-option active" data-chart="bar">柱状图</div>
                            <div class="chart-option" data-chart="radar">雷达图</div>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="branchChart"></canvas>
                    </div>
                </div>

                <div class="data-table-container">
                    <div class="chart-header">
                        <div class="chart-title">分公司详细数据</div>
                        <button id="refreshBranchTable">刷新数据</button>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>分公司</th>
                                <th>商户数量</th>
                                <th>交易笔数</th>
                                <th>交易金额(万元)</th>
                                <th>达标商户数</th>
                                <th>达标率</th>
                                <th>占比</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>华南分公司</td>
                                <td>4,321</td>
                                <td>567,890</td>
                                <td>3,456.7</td>
                                <td>2,876</td>
                                <td>66.6%</td>
                                <td>
                                    28.0%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 28.0%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>华东分公司</td>
                                <td>3,876</td>
                                <td>456,789</td>
                                <td>2,987.6</td>
                                <td>2,543</td>
                                <td>65.6%</td>
                                <td>
                                    25.1%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 25.1%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>华北分公司</td>
                                <td>3,234</td>
                                <td>345,678</td>
                                <td>2,123.4</td>
                                <td>2,098</td>
                                <td>64.9%</td>
                                <td>
                                    20.9%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 20.9%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>西南分公司</td>
                                <td>2,109</td>
                                <td>234,567</td>
                                <td>1,456.7</td>
                                <td>1,321</td>
                                <td>62.6%</td>
                                <td>
                                    13.7%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 13.7%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>西北分公司</td>
                                <td>1,892</td>
                                <td>140,754</td>
                                <td>876.5</td>
                                <td>1,098</td>
                                <td>58.0%</td>
                                <td>
                                    12.3%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 12.3%"></div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="tab-content" id="agent">
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="chart-title">代理商业绩对比</div>
                        <div class="chart-options">
                            <div class="chart-option active" data-chart="bar">柱状图</div>
                            <div class="chart-option" data-chart="scatter">散点图</div>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="agentChart"></canvas>
                    </div>
                </div>

                <div class="data-table-container">
                    <div class="chart-header">
                        <div class="chart-title">代理商详细数据</div>
                        <button id="refreshAgentTable">刷新数据</button>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>代理商代码</th>
                                <th>代理商名称</th>
                                <th>商户数量</th>
                                <th>交易笔数</th>
                                <th>交易金额(万元)</th>
                                <th>达标商户数</th>
                                <th>达标率</th>
                                <th>占比</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>A001</td>
                                <td>金服科技有限公司</td>
                                <td>1,234</td>
                                <td>234,567</td>
                                <td>1,456.7</td>
                                <td>876</td>
                                <td>71.0%</td>
                                <td>
                                    18.7%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 18.7%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>A002</td>
                                <td>银商商务服务有限公司</td>
                                <td>1,098</td>
                                <td>198,765</td>
                                <td>1,234.5</td>
                                <td>765</td>
                                <td>69.7%</td>
                                <td>
                                    15.9%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 15.9%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>A003</td>
                                <td>支付通信息技术有限公司</td>
                                <td>987</td>
                                <td>176,543</td>
                                <td>987.6</td>
                                <td>654</td>
                                <td>66.3%</td>
                                <td>
                                    14.1%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 14.1%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>A004</td>
                                <td>智能支付科技有限公司</td>
                                <td>876</td>
                                <td>154,321</td>
                                <td>876.5</td>
                                <td>543</td>
                                <td>62.0%</td>
                                <td>
                                    12.3%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 12.3%"></div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>A005</td>
                                <td>新金融科技服务有限公司</td>
                                <td>765</td>
                                <td>132,109</td>
                                <td>765.4</td>
                                <td>432</td>
                                <td>56.5%</td>
                                <td>
                                    10.5%
                                    <div class="percentage-bar">
                                        <div class="percentage-fill" style="width: 10.5%"></div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>© 2024 银行联合营销平台 - 商户维度统计分析系统</p>
        </div>
    </div>

    <script>
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化图表
            initIndustryChart();
            initRegionChart();
            initBranchChart();
            initAgentChart();
            
            // 绑定事件
            bindEvents();
        });

        // 初始化行业分析图表
        function initIndustryChart() {
            const ctx = document.getElementById('industryChart').getContext('2d');
            window.industryChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['超市', '餐饮', '加油站', '酒店', '出租车', '其他'],
                    datasets: [{
                        data: [22.3, 18.7, 15.2, 12.1, 8.9, 22.8],
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(255, 206, 86, 0.8)',
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(153, 102, 255, 0.8)',
                            'rgba(201, 203, 207, 0.8)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw}%`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // 初始化地区分析图表
        function initRegionChart() {
            const ctx = document.getElementById('regionChart').getContext('2d');
            window.regionChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['广东省', '江苏省', '浙江省', '山东省', '北京市', '上海市', '四川省', '湖北省'],
                    datasets: [{
                        label: '商户数量',
                        data: [3456, 2876, 2345, 1987, 1654, 1543, 1321, 1098],
                        backgroundColor: 'rgba(54, 162, 235, 0.8)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // 初始化分公司分析图表
        function initBranchChart() {
            const ctx = document.getElementById('branchChart').getContext('2d');
            window.branchChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['华南分公司', '华东分公司', '华北分公司', '西南分公司', '西北分公司', '东北分公司'],
                    datasets: [
                        {
                            label: '商户数量',
                            data: [4321, 3876, 3234, 2109, 1892, 1000],
                            backgroundColor: 'rgba(54, 162, 235, 0.8)',
                            borderWidth: 1
                        },
                        {
                            label: '达标商户数',
                            data: [2876, 2543, 2098, 1321, 1098, 567],
                            backgroundColor: 'rgba(255, 99, 132, 0.8)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // 初始化代理商分析图表
        function initAgentChart() {
            const ctx = document.getElementById('agentChart').getContext('2d');
            window.agentChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['金服科技', '银商商务', '支付通信息', '智能支付科技', '新金融科技', '其他'],
                    datasets: [
                        {
                            label: '商户数量',
                            data: [1234, 1098, 987, 876, 765, 4972],
                            backgroundColor: 'rgba(54, 162, 235, 0.8)',
                            borderWidth: 1
                        },
                        {
                            label: '达标商户数',
                            data: [876, 765, 654, 543, 432, 3495],
                            backgroundColor: 'rgba(255, 99, 132, 0.8)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // 绑定事件
        function bindEvents() {
            // 标签切换
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // 更新按钮状态
                    document.querySelectorAll('.tab-button').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // 更新内容显示
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // 图表类型切换
            document.querySelectorAll('.chart-option').forEach(option => {
                option.addEventListener('click', function() {
                    const chartType = this.getAttribute('data-chart');
                    const chartContainer = this.closest('.chart-container');
                    const chartId = chartContainer.querySelector('canvas').id;
                    
                    // 更新按钮状态
                    chartContainer.querySelectorAll('.chart-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // 更新图表类型
                    updateChartType(chartId, chartType);
                });
            });

            // 返回总览按钮
            document.getElementById('backBtn').addEventListener('click', function() {
                window.location.href = './dashboard.html';
            });

            // 导出数据按钮
            document.getElementById('exportBtn').addEventListener('click', function() {
                exportData();
            });

            // 刷新表格按钮
            document.getElementById('refreshIndustryTable').addEventListener('click', function() {
                refreshIndustryTable();
            });

            document.getElementById('refreshRegionTable').addEventListener('click', function() {
                refreshRegionTable();
            });

            document.getElementById('refreshBranchTable').addEventListener('click', function() {
                refreshBranchTable();
            });

            document.getElementById('refreshAgentTable').addEventListener('click', function() {
                refreshAgentTable();
            });
        }

        // 更新图表类型
        function updateChartType(chartId, chartType) {
            let chart;
            
            switch(chartId) {
                case 'industryChart':
                    chart = window.industryChart;
                    if (chartType === 'bar') {
                        chart.config.type = 'bar';
                        chart.options.plugins.legend.display = false;
                    } else {
                        chart.config.type = 'pie';
                        chart.options.plugins.legend.display = true;
                    }
                    break;
                case 'regionChart':
                    chart = window.regionChart;
                    if (chartType === 'map') {
                        // 这里可以替换为地图图表
                        chart.config.type = 'bar';
                    } else {
                        chart.config.type = 'bar';
                    }
                    break;
                case 'branchChart':
                    chart = window.branchChart;
                    if (chartType === 'radar') {
                        chart.config.type = 'radar';
                    } else {
                        chart.config.type = 'bar';
                    }
                    break;
                case 'agentChart':
                    chart = window.agentChart;
                    if (chartType === 'scatter') {
                        chart.config.type = 'scatter';
                    } else {
                        chart.config.type = 'bar';
                    }
                    break;
            }
            
            chart.update();
        }

        // 导出数据
        function exportData() {
            // 这里可以实现数据导出功能
            alert('数据导出功能正在开发中...');
        }

        // 刷新行业表格
        function refreshIndustryTable() {
            // 这里可以实现刷新行业表格数据的功能
            console.log('刷新行业表格数据');
        }

        // 刷新地区表格
        function refreshRegionTable() {
            // 这里可以实现刷新地区表格数据的功能
            console.log('刷新地区表格数据');
        }

        // 刷新分公司表格
        function refreshBranchTable() {
            // 这里可以实现刷新分公司表格数据的功能
            console.log('刷新分公司表格数据');
        }

        // 刷新代理商表格
        function refreshAgentTable() {
            // 这里可以实现刷新代理商表格数据的功能
            console.log('刷新代理商表格数据');
        }
    </script>
</body>
</html>